webpackJsonp([2],{0:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(37),u=r(a),s=n(11),c=r(s),l=n(740),p=r(l),f=n(759),h=r(f),d=n(757),y=r(d),v=n(760),m=r(v);n(207),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var o=Object.keys(Object(r)),i=0,a=o.length;a>i;i++){var u=o[i],s=Object.getOwnPropertyDescriptor(r,u);void 0!==s&&s.enumerable&&(e[u]=r[u])}}}return e}});var g=c["default"].extend({init:function(){this.products=new h["default"],this.contacts=new y["default"],this.newCode=new m["default"],window.app=this,u["default"].run(p["default"],u["default"].HistoryLocation,function(t){i["default"].render(i["default"].createElement(t,null),document.body)})}});g.init(),t.exports=g},120:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(171),i=r(o);t.exports=i["default"].extend({pointer:env.vars.apiUrl,initialize:function(){this.url="http://localhost:5000/api/"+this.location}})},740:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(753),a=r(i),u=n(754),s=r(u),c=n(748),l=r(c),p=n(747),f=r(p),h=n(750),d=r(h),y=n(751),v=r(y),m=n(752),g=r(m),b=n(1),x=r(b),C=n(37),T=r(C),E=n(10),w=r(E),O=n(88),S=r(O),j=w["default"].MenuItem,_=w["default"].LeftNav,P=w["default"].FlatButton,D=new w["default"].Styles.ThemeManager,N=T["default"].Route,k=T["default"].RouteHandler,A=T["default"].DefaultRoute,M=T["default"].NotFoundRoute,R=T["default"].Redirect,I=[{type:j.Types.LINK,payload:"changelog",text:"Changelog"},{type:j.Types.LINK,payload:"https://trello.com/b/9DTy6SXm/dispense",text:"Trello",target:"_blank"}],F=x["default"].createClass({displayName:"NotFound",render:function(){return x["default"].createElement("h1",null," No Route Found ")}}),L=x["default"].createClass({displayName:"App",mixins:[T["default"].State],contextTypes:{router:x["default"].PropTypes.func},childContextTypes:{muiTheme:x["default"].PropTypes.object},getChildContext:function(){return{muiTheme:D.getCurrentTheme()}},getInitialState:function(){return{location:"",isDocked:!1}},toMainSearch:function(){var t=this.context.router;t.transitionTo("mainSearch")},toAddProduct:function(){var t=this.context.router;t.transitionTo("addProduct")},feedback:function(){window.open("mailto:gbuler@wiley.com?subject=Dispense%20Feedback","_blank")},keyMap:function(){var t=this;return{esc:function(){t.toggleNav()}}},toggleNav:function(){this.refs.leftNav.toggle(),this.setState({isDocked:!this.state.isDocked}),document.body.style.overflow="auto"},render:function(){var t=this,e={height:"50",opacity:"0.9","float":"right"};return x["default"].createElement(S["default"],{keyMap:{esc:function(e){e.preventDefault(),t.toggleNav()},tab:function(t){t.preventDefault()},"shift+tab":function(t){t.preventDefault()}}},x["default"].createElement("div",null,x["default"].createElement("div",{style:{zIndex:10,position:"fixed",right:"0",top:"0"}},x["default"].createElement(P,{label:"Add New Product",style:e,onClick:this.toAddProduct,secondary:!0}),x["default"].createElement(P,{label:"Main Search",style:e,onClick:this.toMainSearch,secondary:!0}),x["default"].createElement(P,{label:"Feedback",style:e,onClick:this.feedback,secondary:!0})),x["default"].createElement("div",{style:{position:"relative",top:"50px"}},x["default"].createElement(k,o({},this.props,{toggleNav:this.toggleNav}))),x["default"].createElement(_,{ref:"leftNav",docked:this.state.isDocked,menuItems:I})))}});t.exports=x["default"].createElement(N,{name:"app",path:"/dispenseManager/",handler:L},x["default"].createElement(R,{from:"/dispenseManager",to:"/dispenseManager/"}),x["default"].createElement(N,{name:"mainSearch",handler:a["default"]}),x["default"].createElement(N,{name:"addProduct",handler:v["default"]}),x["default"].createElement(N,{name:"product",path:"product/:productId",handler:s["default"]},x["default"].createElement(N,{name:"editProduct",handler:l["default"]}),x["default"].createElement(N,{name:"addCodes",handler:f["default"]}),x["default"].createElement(N,{name:"productStats",handler:d["default"]}),x["default"].createElement(A,{handler:l["default"]})),x["default"].createElement(N,{name:"changelog",path:"changelog",handler:g["default"]}),x["default"].createElement(A,{handler:a["default"]}),x["default"].createElement(M,{handler:F}))},741:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=u["default"].TextField,c=u["default"].Paper,l=i["default"].createClass({displayName:"CodeInput",handleChange:function(){this.props.onUserInput(this.refs.codesString.getValue())},render:function(){return i["default"].createElement(c,{zDepth:2,style:{width:"25%",marginTop:"10",marginLeft:"10","float":"left"}},i["default"].createElement("div",{style:{padding:30,minHeight:450}},i["default"].createElement(s,{type:"text",floatingLabelText:"Add Codes...",multiLine:!0,value:this.props.codesString,ref:"codesString",onChange:this.handleChange})))}});t.exports=l},742:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=u["default"].Paper,c=u["default"].RaisedButton,l=i["default"].createClass({displayName:"CodeOutput",getContent:function(){var t={display:"inline-block",height:"auto",width:"intrinsic",margin:2},e=this.props.codes.map(function(e,n){return i["default"].createElement(s,{zDepth:1,key:n,style:t},i["default"].createElement("p",{style:{padding:3}}," ",e," "))});return this.props.codes.length>0?i["default"].createElement("div",null,i["default"].createElement("div",{style:{display:"block",top:0,left:0}},i["default"].createElement(c,{onClick:this.props.submit,primary:!0,label:"Submit Codes"})),e):i["default"].createElement("p",null," Enter codes in the textbox to the left ")},render:function(){var t=this.getContent();return i["default"].createElement(s,{zDepth:2,style:{width:"72%",marginTop:"10",marginRight:"10","float":"right"}},i["default"].createElement("div",{style:{padding:30,minHeight:450}},i["default"].createElement("div",null,t)))}});t.exports=l},743:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=u["default"].Paper,c=u["default"].TextField,l=u["default"].FlatButton,p=i["default"].createClass({displayName:"EditProductForm",getInitialState:function(){var t=this.props.product,e=t.productId,n=t.title,r=t.isbn13,o=this.props.contact,i=o.mainEmail,a=o.cc;return{productId:e,title:n,isbn13:r,mainEmail:i,cc:a}},handleChange:function(t){var e=this.state;e[t.target.name]=t.target.value,this.setState(e)},handleSubmit:function(t){t.preventDefault();var e=this,n=this.refs.title.getValue(),r=this.refs.isbn13.getValue(),o=this.refs.mainEmail.getValue(),i=this.refs.cc.getValue(),a={title:n,isbn13:r},u={mainEmail:o,cc:i};e.props.product.save(a,{wait:!0,success:function(){e.props.contact.save(u,{wait:!0,success:function(){e.props.success()}})}})},render:function(){var t=this.state,e=t.title,n=t.isbn13,r=this.state,o=r.mainEmail,a=r.cc,u={display:"block"},p={padding:"20"};return i["default"].createElement(s,{zDepth:2,style:{width:"95%",marginTop:"30",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("form",{style:p,onSubmit:this.handleSubmit},i["default"].createElement("div",{style:u},i["default"].createElement(c,{type:"text",name:"title",ref:"title",floatingLabelText:"Title",defaultValue:e,onChange:this.handleChange})),i["default"].createElement("div",{style:u},i["default"].createElement(c,{type:"text",name:"isbn13",ref:"isbn13",floatingLabelText:"ISBN",defaultValue:n,onChange:this.handleChange})),i["default"].createElement("div",{style:u},i["default"].createElement(c,{type:"text",name:"mainEmail",ref:"mainEmail",floatingLabelText:"Main Contact Email",defaultValue:o,onChange:this.handleChange})),i["default"].createElement("div",{style:u},i["default"].createElement(c,{type:"text",name:"cc",ref:"cc",floatingLabelText:"CC Emails",defaultValue:a,onChange:this.handleChange})),i["default"].createElement(l,{label:"Submit"})))}});t.exports=p},744:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=n(11),c=r(s),l=n(152),p=r(l),f=u["default"].Menu,h=i["default"].createClass({displayName:"MostUsedProductsTable",contextTypes:{router:i["default"].PropTypes.func},getInitialState:function(){return{data:[]}},componentDidMount:function(){c["default"].products&&this.setState({data:c["default"].products})},_onItemClick:function(t,e,n){var r=this.context.router;r.transitionTo("requestCode",{productId:n.payload})},render:function(){var t=[],e=p["default"](this.state.data.models,"popularity").filter(function(t){return t.popularity>0}).reverse();return e.forEach(function(e){t.push({payload:e.productId,text:e.title,data:e.isbn13})}),i["default"].createElement("div",null,i["default"].createElement("div",null," Most Used Codes..."),i["default"].createElement(f,{menuItems:t,onItemClick:this._onItemClick}))}});t.exports=h},745:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=n(11),c=r(s),l=n(88),p=r(l),f=u["default"].Menu,h=i["default"].createClass({displayName:"ProductTable",contextTypes:{router:i["default"].PropTypes.func},_onItemClick:function(t,e,n){var r=this.context.router;r.transitionTo("product",{productId:n.payload})},render:function(){var t=[];return this.props.products.forEach(function(e){t.push({payload:e.productId,text:e.title,data:e.isbn13})}),i["default"].createElement(p["default"],{keyMap:{esc:function(t){t.preventDefault(),c["default"].trigger("clearText")}}},i["default"].createElement("div",null,i["default"].createElement(f,{menuItems:t,onItemClick:this._onItemClick})))}});t.exports=h},746:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(10),u=r(a),s=u["default"].TextField,c=i["default"].createClass({displayName:"SearchField",handleChange:function(){this.props.onUserInput(this.refs.filterTextInput.getValue())},handleBlur:function(){this.refs.filterTextInput.focus()},componentDidMount:function(){var t=document.getElementsByTagName("input");t[0].className="mousetrap searchField",this.refs.filterTextInput.focus()},render:function(){return i["default"].createElement(s,{className:"mousetrap",style:{height:"50px",top:"0"},type:"text",placeholder:"Search...",value:this.props.filterText,ref:"filterTextInput",onChange:this.handleChange,onBlur:this.handleBlur})}});t.exports=c},747:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(741),u=r(a),s=n(742),c=r(s),l=n(755),p=r(l),f=n(10),h=r(f),d=h["default"].Paper,y=h["default"].Snackbar,v=i["default"].createClass({displayName:"AddCodes",getInitialState:function(){return{formattedCodes:[]}},handleUserInput:function(t){var e=this.format(t);this.setState({formattedCodes:e})},format:function(t){var e=t.split("\n").filter(function(t){return t}),n=e.map(function(t){return t.trim()});return n},submit:function(){var t=this,e=new p["default"];e.save({productId:this.props.productId,codes:t.state.formattedCodes},{wait:!0,isNew:!0,success:function(){t.notifySuccess()},error:function(e,n){t.notifyError(),console.log("error...",e,n)}})},notifySuccess:function(){this.refs.successSnackbar.show()},notifyError:function(){this.refs.errorSnackbar.show()},render:function(){var t=this.props.product,e=t.isbn13,n=t.title;return i["default"].createElement("div",null,i["default"].createElement(d,{zDepth:2,style:{width:"95%",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("h2",{className:"mui-font-style-headline",style:{textAlign:"center",padding:5}},"Add Codes for: ",n),i["default"].createElement("h4",{style:{textAlign:"center"}},e)),i["default"].createElement(u["default"],{onUserInput:this.handleUserInput}),i["default"].createElement(c["default"],{codes:this.state.formattedCodes,submit:this.submit}),i["default"].createElement(y,{ref:"successSnackbar",message:"Codes added!"}),i["default"].createElement(y,{ref:"errorSnackbar",message:"ERROR! No Codes Added."}))}});t.exports=v},748:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(1),a=r(i),u=n(743),s=r(u),c=n(10),l=r(c),p=l["default"].Paper,f=l["default"].Snackbar,h=a["default"].createClass({displayName:"EditProduct",success:function(){this.refs.snackbar.show()},render:function(){var t=this.props.product,e=t.isbn13,n=t.title;return a["default"].createElement("div",null,a["default"].createElement(p,{zDepth:2,style:{width:"95%",marginRight:"auto",marginLeft:"auto"}},a["default"].createElement("h2",{className:"mui-font-style-headline",style:{textAlign:"center"}},"Edit: ",n),a["default"].createElement("h4",{style:{textAlign:"center"}},e)),a["default"].createElement(s["default"],o({},this.props,{success:this.success})),a["default"].createElement(f,{ref:"snackbar",message:"Edit Successful"}))}});t.exports=h},749:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(746),u=r(a),s=n(745),c=r(s),l=n(744),p=r(l),f=n(11),h=r(f),d=i["default"].createClass({displayName:"FilterableProductTable",getInitialState:function(){return{data:[],filterText:""}},componentDidMount:function(){var t=this,e=this;h["default"].on("clearText",function(){t.setState({filterText:""})}),h["default"].products.models.length>0?e.setState({data:h["default"].products}):window.app.products.fetch({success:function(t,n){e.setState({data:n})}})},componentWillUnmount:function(){h["default"].off("clearText")},handleUserInput:function(t){var e;t.length>0?(h["default"].products.filter(t),e=h["default"].products.filtered):e=h["default"].products,this.setState({filterText:t,data:e})},render:function(){return i["default"].createElement("div",null,i["default"].createElement("div",{style:{position:"fixed",top:"0",left:"0",zIndex:"9"}},i["default"].createElement(u["default"],{filterText:this.state.filterText,onUserInput:this.handleUserInput})),i["default"].createElement("div",null,this.state.filterText.length>0?i["default"].createElement(c["default"],{products:this.state.data}):i["default"].createElement(p["default"],null)))}});t.exports=d},750:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=i["default"].createClass({displayName:"ProductStats",render:function(){var t=this.props.product,e=t.isbn13,n=t.title;return i["default"].createElement("div",null,i["default"].createElement("p",null,"Product Stats:"),i["default"].createElement("br",null),i["default"].createElement("p",null," ",e," "),i["default"].createElement("p",null," ",n," "))}});t.exports=a},751:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(11),u=r(a),s=n(10),c=r(s),l=c["default"].TextField,p=c["default"].FlatButton,f=c["default"].Paper,h=c["default"].Snackbar,d=i["default"].createClass({displayName:"addProduct",handleSubmit:function(t){t.preventDefault();var e=this,n=this.refs.title.getValue(),r=this.refs.isbn13.getValue(),o=this.refs.contact.getValue(),i={title:n,isbn13:r},a={mainEmail:o};u["default"].products.create(i,{wait:!0,success:function(){u["default"].contacts.create(a,{wait:!0,success:function(){e.success()}})}})},success:function(){this.refs.snackbar.show()},getInitialState:function(){return{title:"",isbn13:"",contact:""}},handleChange:function(t){var e=this.state;e[t.target.name]=t.target.value,this.setState(e)},render:function(){var t={display:"block"},e={padding:20};return i["default"].createElement("div",null,i["default"].createElement(f,{zDepth:3,style:{width:"85%",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("form",{style:e,onSubmit:this.handleSubmit},i["default"].createElement("div",{style:t},i["default"].createElement(l,{type:"text",name:"title",ref:"title",floatingLabelText:"Title",onChange:this.handleChange})),i["default"].createElement("div",{style:t},i["default"].createElement(l,{type:"text",name:"isbn13",ref:"isbn13",floatingLabelText:"ISBN",onChange:this.handleChange})),i["default"].createElement("div",{style:t},i["default"].createElement(l,{type:"text",name:"contact",ref:"contact",floatingLabelText:"Contact",onChange:this.handleChange})),i["default"].createElement(p,{label:"Submit"}))),i["default"].createElement(h,{ref:"snackbar",message:"Product Added!"}))}});t.exports=d},752:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(190),u=r(a),s=i["default"].createClass({displayName:"Changelog",render:function(){return i["default"].createElement("div",{dangerouslySetInnerHTML:{__html:u["default"]}})}});t.exports=s},753:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(1),i=r(o),a=n(37),u=r(a),s=n(11),c=r(s),l=n(749),p=r(l),f=u["default"].RouteHandler,h=i["default"].createClass({displayName:"MainSearch",contextTypes:{router:i["default"].PropTypes.func},render:function(){return i["default"].createElement("div",null,i["default"].createElement("header",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"50px",opacity:"0.8",backgroundColor:"white",zIndex:"4"}}),i["default"].createElement("div",null,i["default"].createElement(p["default"],{toggleNav:this.props.toggleNav,products:c["default"].products}),i["default"].createElement(f,this.props)))}});t.exports=h},754:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(11),i=r(o),a=n(1),u=r(a),s=n(37),c=r(s),l=n(10),p=r(l),f=c["default"].RouteHandler,h=p["default"].FlatButton,d=u["default"].createClass({displayName:"ManageProduct",contextTypes:{router:u["default"].PropTypes.func},getInitialState:function(){return{productId:this.props.params.productId,contact:null,product:null}},componentDidMount:function(){var t=this;i["default"].contacts.getOrFetch(t.props.params.productId,{all:!0},function(e,n){e&&console.error("contact not found",e),t.setState({contact:n})}),i["default"].products.getOrFetch(t.props.params.productId,{all:!0},function(e,n){e&&console.error("model not found",e),t.setState({product:n})})},toEditProduct:function(){var t=this.state.productId,e=this.context.router;e.transitionTo("editProduct",{productId:t})},toAddCodes:function(){var t=this.state.productId,e=this.context.router;e.transitionTo("addCodes",{productId:t})},toProductStats:function(){var t=this.state.productId,e=this.context.router;e.transitionTo("productStats",{productId:t})},render:function(){var t={height:"50",opacity:"0.9","float":"right"};return this.state.product&&this.state.contact?u["default"].createElement("div",null,u["default"].createElement("div",{style:{position:"fixed",top:"0",left:"0",zIndex:"9"}},u["default"].createElement(h,{label:"Stats",style:t,onClick:this.toProductStats,secondary:!0}),u["default"].createElement(h,{label:"Edit Product",style:t,onClick:this.toEditProduct,secondary:!0}),u["default"].createElement(h,{label:"Add Codes",style:t,onClick:this.toAddCodes,secondary:!0})),u["default"].createElement(f,this.state)):u["default"].createElement("div",null,"LOADING PRODUCT...")}});t.exports=d},755:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(43),i=r(o);t.exports=i["default"].extend({location:"availableCodes-collection/addCodes",initialize:function(){this.url="http://localhost:8080/api/"+this.location,console.log("url",this.url)},props:{productId:"any",codes:"array"},session:{},derived:{id:function(){return this.productId}}})},756:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(43),i=r(o);t.exports=i["default"].extend({props:{productId:"any",mainEmail:"string",cc:"string",lastEmailed:"string"},derived:{id:function(){return this.productId}}})},757:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(120),i=r(o),a=n(756),u=r(a);t.exports=i["default"].extend({model:u["default"],location:"contacts",initialize:function(){i["default"].prototype.initialize.call(this)}})},758:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var o=n(43),i=r(o),a=n(11),u=r(a);t.exports=i["default"].extend({props:{productId:"any",isbn13:"string",title:"string",author:"string",category:"string",config:"string",nCodes:"number"},session:{selected:["boolean",!0,!1]},derived:{id:function(){return this.productId},contact:function(){return u["default"].contacts.get(this.productId)}}})},759:function(t,e,n){"use strict";var r=n(120),o=n(758),i=n(187);t.exports=r.extend({model:o,location:"products",initialize:function(){r.prototype.initialize.call(this);var t=this;this.filtered=new r(t.models)},filter:function(t){var e=new i(this.models,{keys:["isbn13","title"],threshold:.35,distance:250});this.filtered.set(e.search(t))},select:function(t){this.isSelected?(this.deselect(),this.isSelected=t,this.isSelected.toggle("selected")):(this.isSelected=t,this.isSelected.toggle("selected"))},deselect:function(){this.isSelected.selected=!1,this.isSelected=!1}})},760:function(t,e,n){"use strict";var r=n(120),o=n(761);t.exports=r.extend({model:o,location:"usedCode-collection",byProduct:function(t){var e={filter:{where:{productId:t},limit:50,order:"date DESC"}};return e},format:function(t){var e={filter:{where:t.where,limit:t.limit,order:t.order}};return console.log(e),e},initialize:function(){r.prototype.initialize.call(this)}})},761:function(t,e,n){"use strict";var r=n(43);t.exports=r.extend({props:{productId:"any",customerName:"string",customerEmail:"string",universityOrBusiness:"string",representative:"string",chatOrTicket:"string",date:"string",code:"string"}})}});
//# sourceMappingURL=dispenseManager.entry.js.map