webpackJsonp([2],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(38),a=r(s),u=n(46),l=r(u),c=n(269),p=r(c),h=n(167),d=r(h);n(152),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var o=Object.keys(Object(r)),i=0,s=o.length;s>i;i++){var a=o[i],u=Object.getOwnPropertyDescriptor(r,a);void 0!==u&&u.enumerable&&(t[a]=r[a])}}}return t}}),d["default"]();var f=n(26),m="https:"===window.location.protocol,y=f.DefaultSession.connect({host:window.location.hostname,port:window.location.port||(m?443:80),path:"/db",secure:m,db:"dispense"}),g=l["default"].extend({init:function(){this.filterText="",this.RethinkSession=y,a["default"].run(p["default"],a["default"].HistoryLocation,function(e){i["default"].render(i["default"].createElement(e,null),document.body)})}});g.init(),e.exports=g},255:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(11),a=r(s),u=a["default"].TextField,l=a["default"].Paper,c=i["default"].createClass({displayName:"CodeInput",handleChange:function(){this.props.onUserInput(this.refs.codesString.getValue())},render:function(){return i["default"].createElement(l,{zDepth:2,style:{width:"25%",marginTop:"10",marginLeft:"10","float":"left"}},i["default"].createElement("div",{style:{padding:30,minHeight:450}},i["default"].createElement(u,{type:"text",floatingLabelText:"Add Codes...",multiLine:!0,value:this.props.codesString,ref:"codesString",onChange:this.handleChange})))}});e.exports=c},256:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(11),a=r(s),u=a["default"].Paper,l=a["default"].RaisedButton,c=i["default"].createClass({displayName:"CodeOutput",getContent:function(){var e={display:"inline-block",height:"auto",width:"intrinsic",margin:2},t=this.props.codes.map(function(t,n){return i["default"].createElement(u,{zDepth:1,key:n,style:e},i["default"].createElement("p",{style:{padding:3}}," ",t," "))});return this.props.codes.length>0?i["default"].createElement("div",null,i["default"].createElement("div",{style:{display:"block",top:0,left:0}},i["default"].createElement(l,{onClick:this.props.submit,primary:!0,label:"Submit Codes"})),t):i["default"].createElement("p",null," Enter codes in the textbox to the left ")},render:function(){var e=this.getContent();return i["default"].createElement(u,{zDepth:2,style:{width:"72%",marginTop:"10",marginRight:"10","float":"right"}},i["default"].createElement("div",{style:{padding:30,minHeight:450}},i["default"].createElement("div",null,e)))}});e.exports=c},257:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(11),a=r(s),u=a["default"].Paper,l=a["default"].TextField,c=a["default"].FlatButton,p=n(26),h=p.r,d=i["default"].createClass({displayName:"EditProductForm",getInitialState:function(){var e=this.props.product,t=e.id,n=e.productId,r=e.title,o=e.isbn13,i=this.props.contact,s=i.mainEmail,a=i.cc;return{id:t,productId:n,title:r,isbn13:o,mainEmail:s,cc:a}},handleChange:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)},handleSubmit:function(e){e.preventDefault();var t=this,n=this.refs.title.getValue(),r=this.refs.isbn13.getValue(),o=this.refs.mainEmail.getValue(),i=this.refs.cc.getValue(),s={title:n,isbn13:r},a={mainEmail:o,cc:i},u=h.table("products").get(this.props.product.id).update(s),l=h.table("contacts").get(this.props.contact.id).update(a);p.DefaultSession.runQuery(u).then(function(e){p.DefaultSession.runQuery(l)})["catch"](function(e){console.log(e)}).then(function(e){t.props.success()})},render:function(){var e=this.state,t=e.title,n=e.isbn13,r=this.state,o=r.mainEmail,s=r.cc,a={display:"block"},p={padding:"20"};return i["default"].createElement(u,{zDepth:2,style:{width:"95%",marginTop:"30",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("form",{style:p,onSubmit:this.handleSubmit},i["default"].createElement("div",{style:a},i["default"].createElement(l,{type:"text",name:"title",ref:"title",floatingLabelText:"Title",defaultValue:t,onChange:this.handleChange})),i["default"].createElement("div",{style:a},i["default"].createElement(l,{type:"text",name:"isbn13",ref:"isbn13",floatingLabelText:"ISBN",defaultValue:n,onChange:this.handleChange})),i["default"].createElement("div",{style:a},i["default"].createElement(l,{type:"text",name:"mainEmail",ref:"mainEmail",floatingLabelText:"Main Contact Email",defaultValue:o,onChange:this.handleChange})),i["default"].createElement("div",{style:a},i["default"].createElement(l,{type:"text",name:"cc",ref:"cc",floatingLabelText:"CC Emails",defaultValue:s,onChange:this.handleChange})),i["default"].createElement(c,{label:"Submit",type:"submit"})))}});e.exports=d},261:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(255),a=r(s),u=n(256),l=r(u),c=n(11),p=r(c),h=p["default"].Paper,d=p["default"].Snackbar,f=n(26),m=f.r,y=i["default"].createClass({displayName:"AddCodes",getInitialState:function(){return{formattedCodes:[]}},handleUserInput:function(e){var t=this.format(e);this.setState({formattedCodes:t})},format:function(e){var t=e.split("\n").filter(function(e){return e}),n=t.map(function(e){return e.trim()});return n},submit:function(){var e=this,t=this.state.formattedCodes.map(function(t){return{code:t,productId:e.props.product.productId}}),n=m.table("availableCodes").insert(t);f.DefaultSession.runQuery(n)["catch"](function(t){console.log(t),e.notifyError()}).then(function(t){e.notifySuccess()})},notifySuccess:function(){this.refs.successSnackbar.show()},notifyError:function(){this.refs.errorSnackbar.show()},render:function(){var e=this.props.product,t=e.isbn13,n=e.title;return i["default"].createElement("div",null,i["default"].createElement(h,{zDepth:2,style:{width:"95%",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("h2",{className:"mui-font-style-headline",style:{textAlign:"center",padding:5}},"Add Codes for: ",n),i["default"].createElement("h4",{style:{textAlign:"center"}},t)),i["default"].createElement(a["default"],{onUserInput:this.handleUserInput}),i["default"].createElement(l["default"],{codes:this.state.formattedCodes,submit:this.submit}),i["default"].createElement(d,{ref:"successSnackbar",message:"Codes added!"}),i["default"].createElement(d,{ref:"errorSnackbar",message:"ERROR! No Codes Added."}))}});e.exports=y},262:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(257),a=r(s),u=n(11),l=r(u),c=l["default"].Paper,p=l["default"].Snackbar,h=i["default"].createClass({displayName:"EditProduct",success:function(){this.refs.snackbar.show()},render:function(){var e=this.props.product.title,t=this.props.product.isbn13;return i["default"].createElement("div",null,i["default"].createElement(c,{zDepth:2,style:{width:"95%",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("h2",{className:"mui-font-style-headline",style:{textAlign:"center"}},"Edit: ",e),i["default"].createElement("h4",{style:{textAlign:"center"}},t)),i["default"].createElement(a["default"],{product:this.props.product,contact:this.props.contact,success:this.success}),i["default"].createElement(p,{ref:"snackbar",message:"Edit Successful"}))}});e.exports=h},263:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=i["default"].createClass({displayName:"ProductStats",render:function(){var e=this.props.product,t=e.isbn13,n=e.title;return i["default"].createElement("div",null,i["default"].createElement("p",null,"Product Stats:"),i["default"].createElement("br",null),i["default"].createElement("p",null," ",t," "),i["default"].createElement("p",null," ",n," "))}});e.exports=s},269:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(271),s=r(i),a=n(272),u=r(a),l=n(262),c=r(l),p=n(261),h=r(p),d=n(263),f=r(d),m=n(270),y=r(m),g=n(124),v=r(g),b=n(1),_=r(b),T=n(38),E=r(T),C=n(11),w=r(C),x=n(166),S=r(x),P=w["default"].MenuItem,O=w["default"].LeftNav,D=w["default"].FlatButton,N=new w["default"].Styles.ThemeManager,k=E["default"].Route,R=E["default"].RouteHandler,M=E["default"].DefaultRoute,A=E["default"].NotFoundRoute,I=E["default"].Redirect,j=[{type:P.Types.LINK,payload:"changelog",text:"Changelog"},{type:P.Types.LINK,payload:"https://trello.com/b/9DTy6SXm/dispense",text:"Trello",target:"_blank"}],L=_["default"].createClass({displayName:"NotFound",render:function(){return _["default"].createElement("h1",null," No Route Found ")}}),F=_["default"].createClass({displayName:"App",mixins:[E["default"].State],contextTypes:{router:_["default"].PropTypes.func},childContextTypes:{muiTheme:_["default"].PropTypes.object},getChildContext:function(){return{muiTheme:N.getCurrentTheme()}},getInitialState:function(){return{location:"",isDocked:!1}},toMainSearch:function(){var e=this.context.router;e.transitionTo("mainSearch")},toAddProduct:function(){var e=this.context.router;e.transitionTo("addProduct")},feedback:function(){window.open("mailto:gbuler@wiley.com?subject=Dispense%20Feedback","_blank")},keyMap:function(){var e=this;return{esc:function(){e.toggleNav()}}},toggleNav:function(){this.refs.leftNav.toggle(),this.setState({isDocked:!this.state.isDocked}),document.body.style.overflow="auto"},render:function(){var e=this,t={height:"50",opacity:"0.9","float":"right"};return _["default"].createElement(S["default"],{keyMap:{esc:function(t){t.preventDefault(),e.toggleNav()},tab:function(e){e.preventDefault()},"shift+tab":function(e){e.preventDefault()}}},_["default"].createElement("div",null,_["default"].createElement("div",{style:{zIndex:10,position:"fixed",right:"0",top:"0"}},_["default"].createElement(D,{label:"Add New Product",style:t,onClick:this.toAddProduct,secondary:!0}),_["default"].createElement(D,{label:"Main Search",style:t,onClick:this.toMainSearch,secondary:!0}),_["default"].createElement(D,{label:"Feedback",style:t,onClick:this.feedback,secondary:!0})),_["default"].createElement("div",{style:{position:"relative",top:"50px"}},_["default"].createElement(R,o({},this.props,{toggleNav:this.toggleNav}))),_["default"].createElement(O,{ref:"leftNav",docked:this.state.isDocked,menuItems:j})))}});e.exports=_["default"].createElement(k,{name:"app",path:"/dispenseManager/",handler:F},_["default"].createElement(I,{from:"/dispenseManager",to:"/dispenseManager/"}),_["default"].createElement(k,{name:"mainSearch",handler:s["default"]}),_["default"].createElement(k,{name:"addProduct",handler:y["default"]}),_["default"].createElement(k,{name:"product",path:"product/:productId",handler:u["default"]},_["default"].createElement(k,{name:"editProduct",handler:c["default"]}),_["default"].createElement(k,{name:"addCodes",handler:h["default"]}),_["default"].createElement(k,{name:"productStats",handler:f["default"]}),_["default"].createElement(M,{handler:c["default"]})),_["default"].createElement(k,{name:"changelog",path:"changelog",handler:v["default"]}),_["default"].createElement(M,{handler:s["default"]}),_["default"].createElement(A,{handler:L}))},270:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(11),a=r(s),u=a["default"].TextField,l=a["default"].FlatButton,c=a["default"].Paper,p=a["default"].Snackbar,h=n(26),d=h.r,f=i["default"].createClass({displayName:"addProduct",handleSubmit:function(e){var t=this;e.preventDefault();var n=void 0,r=this.refs.title.getValue(),o=this.refs.isbn13.getValue(),i=this.refs.contact.getValue(),s={title:r,isbn13:o,nCodes:0,popularity:0},a={mainEmail:i},u=d.table("products").count();h.DefaultSession.runQuery(u).then(function(e){n=e+1,s.productId=n,h.DefaultSession.runQuery(d.table("products").insert(s))}).then(function(){a.productId=n,h.DefaultSession.runQuery(d.table("contacts").insert(a))})["catch"](function(e){console.log(e)}).then(function(){t.success()})},success:function(){this.refs.snackbar.show()},getInitialState:function(){return{title:"",isbn13:"",contact:""}},handleChange:function(e){var t=this.state;t[e.target.name]=e.target.value,this.setState(t)},render:function(){var e={display:"block"},t={padding:20};return i["default"].createElement("div",null,i["default"].createElement(c,{zDepth:3,style:{width:"85%",marginRight:"auto",marginLeft:"auto"}},i["default"].createElement("form",{style:t,onSubmit:this.handleSubmit},i["default"].createElement("div",{style:e},i["default"].createElement(u,{type:"text",name:"title",ref:"title",floatingLabelText:"Title",onChange:this.handleChange})),i["default"].createElement("div",{style:e},i["default"].createElement(u,{type:"text",name:"isbn13",ref:"isbn13",floatingLabelText:"ISBN",onChange:this.handleChange})),i["default"].createElement("div",{style:e},i["default"].createElement(u,{type:"text",name:"contact",ref:"contact",floatingLabelText:"Contact",onChange:this.handleChange})),i["default"].createElement(l,{label:"Submit",type:"submit"}))),i["default"].createElement(p,{ref:"snackbar",message:"Product Added!"}))}});e.exports=f},271:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(38),a=r(s),u=n(125),l=r(u),c=n(26),p=c.r,h=a["default"].RouteHandler,d=i["default"].createClass({displayName:"MainSearch",mixins:[c.DefaultMixin],contextTypes:{router:i["default"].PropTypes.func},getInitialState:function(){return{products:{}}},observe:function(e,t){return{products:new c.QueryRequest({query:p.table("products"),changes:!0,initial:[]})}},render:function(){var e=this.data.products.value();return i["default"].createElement("div",null,i["default"].createElement("header",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"50px",opacity:"0.8",backgroundColor:"white",zIndex:"4"}}),i["default"].createElement("div",null,i["default"].createElement(l["default"],{transitionTo:"product",toggleNav:this.props.toggleNav,products:e}),i["default"].createElement(h,null)))}});e.exports=d},272:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(1),i=r(o),s=n(38),a=r(s),u=n(11),l=r(u),c=n(26),p=a["default"].RouteHandler,h=l["default"].FlatButton,d=i["default"].createClass({displayName:"ManageProduct",mixins:[c.DefaultMixin],contextTypes:{router:i["default"].PropTypes.func},observe:function(e,t){var n=parseInt(this.context.router.getCurrentParams().productId,10);return{product:new c.QueryRequest({query:c.r.table("products").filter({productId:n}),initial:[]}),contact:new c.QueryRequest({query:c.r.table("contacts").filter({productId:n}),initial:[]})}},toEditProduct:function(){var e=this.data.product._value[0].productId,t=this.context.router;t.transitionTo("editProduct",{productId:e})},toAddCodes:function(){var e=this.data.product._value[0].productId,t=this.context.router;t.transitionTo("addCodes",{productId:e})},render:function(){var e={},t={height:"50",opacity:"0.9","float":"right"};return this.data.product&&this.data.product._value.length>0?(e.product=this.data.product._value[0],e.contact=this.data.contact._value[0]):(e.product={},e.contact={}),e.product&&e.contact?i["default"].createElement("div",null,i["default"].createElement("div",{style:{position:"fixed",top:"0",left:"0",zIndex:"9"}},i["default"].createElement(h,{label:"Edit Product",style:t,onClick:this.toEditProduct,secondary:!0}),i["default"].createElement(h,{label:"Add Codes",style:t,onClick:this.toAddCodes,secondary:!0})),i["default"].createElement(p,e)):i["default"].createElement("div",null,"LOADING PRODUCT...")}});e.exports=d}});
//# sourceMappingURL=dispenseManager.entry.js.map